STACK SEGMENT STACK
	DW 32 DUP(?)
STACK ENDS

DATA SEGMENT
	SIGN DB 00H
DATA ENDS

CODE   SEGMENT
	   ASSUME CS:CODE, SS:STACK,DS:DATA
START: 
	MOV AX,0000H
	MOV DS,AX

	MOV AX,OFFSET MIR6
	MOV SI,0038H
	MOV [SI],AX
	MOV AX,CS
	MOV SI,003AH
	MOV [SI],AX

	CLI
	MOV AL,11H
	OUT 20H,AL
	MOV AL,08H
	OUT 21H,AL
	MOV AL,04H
	OUT 21H,AL
	MOV AL,07H
	OUT 21H,AL
	MOV AL,2FH
	OUT 21H,AL
	STI

	MOV AX, 00H
	MOV DX, 600H
	
MAINLOOP:
	CMP SIGN,00H
	JNE RECCHECK
	CALL SHARP
	JMP MAINLOOP
RECCHECK:
	CMP SIGN,01H
	JNE TRICHECK
	CALL RECTANGLE
	JMP MAINLOOP
TRICHECK:
	CMP SIGN,02H
	JNE TRACHECK
	CALL TRIANGLE
	JMP MAINLOOP
TRACHECK:
	CMP SIGN,03H
	JNE MAINLOOP
	CALL TRAPEZOID
	JMP MAINLOOP
	  
SHARP:;T=FF*DELAY1
	MOV AL, 00H
SHARP1:
	OUT DX, AL
	CALL DELAY1
	INC AL
	CMP AL,0F0H
	JNE SHARP1
	RET
	   
RECTANGLE:;T=2*DELAY2
	MOV AL, 00H
	OUT DX, AL
	CALL DELAY2
	MOV AL, 0F0H
	OUT DX, AL
	CALL DELAY2
	RET
	
TRIANGLE:;T=2*FF*DELAY1
	MOV AL, 00H
TRIINC:
	OUT DX, AL
	CALL DELAY1
	INC AL
	CMP AL,0F0H
	JNE TRIINC
TRIDEC:
	OUT DX, AL
	CALL DELAY1
	DEC AL
	CMP AL,00H
	JNE TRIDEC
	RET

TRAPEZOID:
	MOV AL,00H
TRAINC:
	OUT DX,AL
	CALL DELAY3
	ADD AL,30H
	CMP AL,0F0H
	JNE TRAINC
TRADEC:
	OUT DX,AL
	CALL DELAY3
	SUB AL,30H
	CMP AL,00H
	JNE TRADEC
	RET
	   
DELAY1:
	PUSH CX
	MOV CX, 03FFH
DELAYLOOP1:
	PUSH AX
    POP  AX
	LOOP DELAYLOOP1
	POP CX
	RET
	   
DELAY2:
	PUSH CX
	MOV CX, 0FF00H
DELAYLOOP2:
	PUSH AX
	POP  AX
	LOOP DELAYLOOP2
	POP CX
	RET

DELAY3:
	PUSH CX
	MOV CX, 8F00H
DELAYLOOP3:
	PUSH AX
	POP  AX
	LOOP DELAYLOOP3
	POP CX
	RET
	
MIR6:
	PUSH AX
	PUSH CX
	INC SIGN
	CMP SIGN,04H
	JNE MIR6BACK
	MOV SIGN,00H
MIR6BACK:
	POP CX
	POP AX
	IRET
	   
CODE   ENDS
	   END START